<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>vim编码方式设置(转载) - Web - Security - Code</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="vim编码方式设置(转载)"/>
            <meta property="og:url" content="../tool/md-file-encode.html"/>
            <meta property="og:description" content="一般的，vim打开中文文件时会出现乱码，原因比较复杂，不罗嗦了。直接讲解决办法 set fileencoding=gb18030 set fileencodings=utf-8,gb18030,utf-16,big5 想看这样设置的原因吗？请继续。下文在网络中广泛流传 vim里面的编码主要跟三个参数有关：enc(encoding), fenc(fileencoding)和fencs(fileencodings) 其中fenc是当前文件的编码，也就是说，一个在vim里面已经正确显示了的文件(前提是你的系统环境跟你的enc设置匹配 ..."/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="../theme/css/bootstrap.min.css" type="text/css"/>
    <!-- <link href="http://cdn.bootcss.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>   -->
    <link href="../theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="../theme/css/pygments/emacs.css" rel="stylesheet">
    <link rel="stylesheet" href="../theme/css/style.css" type="text/css"/>

        <link href="../feed.xml" type="application/rss+xml" rel="alternate"
              title="Web - Security - Code RSS Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../" class="navbar-brand">
Web - Security - Code            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="http://www.webhhh.net/index.html">首页</a></li>
                    <li><a href="http://www.webhhh.net/category/web-security.html">WEB安全</a></li>
                    <li><a href="http://www.webhhh.net/category/tool.html">工具</a></li>
                    <li><a href="http://www.webhhh.net/category/python.html">Python</a></li>
                    <li><a href="http://www.webhhh.net/category/code.html">源代码</a></li>
                    <li><a href="http://www.webhhh.net/category/life.html">生活</a></li>
                    <li><a href="http://www.webhhh.net/life/life-main-point.html">关于我</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                    <li><a href="../random.html"><span class="icon-label">试试手气</span></a></li>
                <!--
<li class="banner">
    <a title="网速较慢的话请耐心等待~" href='javascript:(function(){function c(){var e=document.createElement("link");e.setAttribute("type","text/css");e.setAttribute("rel","stylesheet");e.setAttribute("href",f);e.setAttribute("class",l);document.body.appendChild(e)}function h(){var e=document.getElementsByClassName(l);for(var t=0;t<e.length;t++){document.body.removeChild(e[t])}}function p(){var e=document.createElement("div");e.setAttribute("class",a);document.body.appendChild(e);setTimeout(function(){document.body.removeChild(e)},100)}function d(e){return{height:e.offsetHeight,width:e.offsetWidth}}function v(i){var s=d(i);return s.height>e&&s.height<n&&s.width>t&&s.width<r}function m(e){var t=e;var n=0;while(!!t){n+=t.offsetTop;t=t.offsetParent}return n}function g(){var e=document.documentElement;if(!!window.innerWidth){return window.innerHeight}else if(e&&!isNaN(e.clientHeight)){return e.clientHeight}return 0}function y(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function E(e){var t=m(e);return t>=w&&t<=b+w}function S(){var e=document.createElement("audio");e.setAttribute("class",l);e.src=i;e.loop=false;e.addEventListener("canplay",function(){setTimeout(function(){x(k)},500);setTimeout(function(){N();p();for(var e=0;e<O.length;e++){T(O[e])}},15500)},true);e.addEventListener("ended",function(){N();h()},true);e.innerHTML=" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";document.body.appendChild(e);e.play()}function x(e){e.className+=" "+s+" "+o}function T(e){e.className+=" "+s+" "+u[Math.floor(Math.random()*u.length)]}function N(){var e=document.getElementsByClassName(s);var t=new RegExp("\\b"+s+"\\b");for(var n=0;n<e.length;){e[n].className=e[n].className.replace(t,"")}}var e=30;var t=30;var n=350;var r=350;var i="//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";var s="mw-harlem_shake_me";var o="im_first";var u=["im_drunk","im_baked","im_trippin","im_blown"];var a="mw-strobe_light";var f="//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";var l="mw_added_css";var b=g();var w=y();var C=document.getElementsByTagName("*");var k=null;for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){if(E(A)){k=A;break}}}if(A===null){console.warn("Could not find a node of the right size. Please try a different page.");return}c();S();var O=[];for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){O.push(A)}}})()'>High一下!</a>
</li>                -->
                <li><a href="../archives.html"><i class="fa fa-th-list"></i><span class="icon-label">归档</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
        <div class="panel panel-default">
            <header class="page-header">
                <h1>
                    <a href="../tool/md-file-encode.html"
                       rel="bookmark"
                       title="Permalink to vim编码方式设置(转载)">
                        vim编码方式设置(转载)
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-05-12T02:14:00"> 2014-05-12 02:14:00</time>
    </span>
            <span class="label label-default">By</span>
            <a href="../author/webhhh.html"><i class="fa fa-user"></i> webhhh</a>



<span class="label label-default">Tags</span>
	<a href="../tag/vim.html">vim</a>
        /
	<a href="../tag/encode.html">encode</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>一般的，vim打开中文文件时会出现乱码，原因比较复杂，不罗嗦了。直接讲解决办法</p>
<div class="highlight"><pre><span class="n">set</span> <span class="n">fileencoding</span><span class="o">=</span><span class="n">gb18030</span>
<span class="n">set</span> <span class="n">fileencodings</span><span class="o">=</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="n">gb18030</span><span class="p">,</span><span class="n">utf</span><span class="o">-</span><span class="mi">16</span><span class="p">,</span><span class="n">big5</span>
</pre></div>


<p>想看这样设置的原因吗？请继续。下文在网络中广泛流传</p>
<p>vim里面的编码主要跟三个参数有关：enc(encoding), fenc(fileencoding)和fencs(fileencodings)</p>
<p>其中fenc是当前文件的编码，也就是说，一个在vim里面已经正确显示了的文件(前提是你的系统环境跟你的enc设置匹配)，你可以通过改变 fenc后再w来将此文件存成不同的编码。比如说，我:set fenc=utf-8然后:w就把文件存成utf-8的了，:set fenc=gb18030再:w就把文件存成gb18030的了。这个值对于打开文件的时候是否能够正确地解码没有任何关系。</p>
<p>fencs就是用来在打开文件的时候进行解码的猜测列表。文件编码没有百分百正确的判断方法，所以vim只能猜测文件编码。比如我的vimrc里面这个的设置是</p>
<div class="highlight"><pre><span class="n">set</span> <span class="n">fileencodings</span><span class="o">=</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="n">gb18030</span><span class="p">,</span><span class="n">utf</span><span class="o">-</span><span class="mi">16</span><span class="p">,</span><span class="n">big5</span>
</pre></div>


<p>所以我的vim每打开一个文件，先尝试用utf-8进行解码，如果用utf-8解码到了一半出错(所谓出错的意思是某个地方无法用utf-8正确地 解码)，那么就从头来用gb18030重新尝试解码，如果gb18030又出错(注意gb18030并不是像utf-8似的规则编码，所以所谓的出错只是 说某个编码没有对应的有意义的字，比如0)，就尝试用utf-16，仍然出错就尝试用big5。这一趟下来，如果中间的某次解码从头到尾都没有出错，那么 vim就认为这个文件是这个编码的，不会再进行后面的尝试了。这个时候，fenc的值就会被设为vim最后采用的编码值，可以用:set fenc?来查看具体是什么。</p>
<p>当然这个也是有可能出错的，比如你的文件是gb18030编码的，但是实际上只有一两个字符是中文，那么有可能他们正好也能被utf-8解码，那么这个文件就会被误认为是utf-8的导致错误解码。</p>
<p>至于enc，其作用基本只是显示。不管最后的文件是什么编码的，vim都会将其转换为当前系统编码来进行处理，这样才能在当前系统里面正确地显示出 来，因此enc就是干这个的。在windows下面，enc默认是cp936，这也就是中文windows的默认编码，所以enc是不需要改的。在 linux下，随着你的系统locale可能设为zh_CN.gb18030或者zh_CN.utf-8，你的enc要对应的设为gb18030或者 utf-8(或者gbk之类的)。</p>
<p>最后再来说一下新建空文件的默认编码。看文档好像说会采用fencs里面的第一个编码作为新建文件的默认编码。但是这里有一个问题，就是fencs 的顺序跟解码成功率有很大关系，根据我的经验utf-8在前比gb18030在前成功率要高一些，那么如果我新建文件默认想让它是gb18030编码怎么 办？一个方法是每次新建文件后都:set fenc=gb18030一下，不过我发现在vimrc里面设置fenc=gb18030也能达到这个效果。</p>
            </div>
            <br />
    <!-- JiaThis Button BEGIN -->
    <div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_qzone">QQ空间</a>
    <a class="jiathis_button_tsina">新浪微薄</a>
    <a class="jiathis_button_tqq">腾讯微薄</a>
    <a class="jiathis_button_renren">人人网</a>
    <a class="jiathis_button_kaixin001">开心网</a>

    <a href="http://www.jiathis.com/share?uid=1904070" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
    <a class="jiathis_counter_style"></a>
    </div>
    <script type="text/javascript" >
    var jiathis_config={
        data_track_clickback:true,
        summary:"",
        shortUrl:false,
        hideMore:false
    }
    </script>
    <script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1904070" charset="utf-8"></script>
    <!-- JiaThis Button END -->

    <div>
        <br />
        <hr />
        <ul>
            <li>
                <a href="../python/xpath.html">
                    上一篇文章：xpath快速应用平台搭建
                </a>
            </li>
            <li>
                <a href="../life/life-main-point.html">
                    下一篇文章：关于我
                </a>
            </li>
        </ul>
    </div>
             </div>
            <!-- /.entry-content -->
<!-- Duoshuo Comment BEGIN -->
    <div class="ds-thread"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"webhhh"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = 'http://static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
<!-- Duoshuo Comment END -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
<div class="row">
<div class="well well-sm" id="sidebar">
<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><a href=""><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">最新日志</span></h4>
                    <ul class="list-group" id="recentposts">
                        <li class="list-group-item">
                            <a href="../web-security/PHP-strcpy.html">
                                PHP strcmp函数漏洞深入研究
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../web-security/study.html">
                                下一步学习计划
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../life/create-first-blog.html">
                                怎么快速搭建GitHub静态博客
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../life/life-main-point.html">
                                关于我
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../tool/md-file-encode.html">
                                vim编码方式设置(转载)
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../python/xpath.html">
                                xpath快速应用平台搭建
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../code/md5crack.html">
                                MD5在线破解
                            </a>
                        </li>
                    </ul>
                </li>
    </section>            
</aside>
</div> 
</div> 

<div class="row">
<div class="well well-sm" id="sidebar">
<aside>
    <section>

                <li class="list-group-item"><a href="../category/index.html"><h4><i class="fa fa-coffee fa-lg"></i><span class="icon-label">日志分类</span></h4></a>
                    <ul class="list-group" id="categories">
                        <li class="list-group-item">
                            <a href="../category/code.html">
                                <i class="fa fa-folder-open fa-lg"></i> Code
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../category/life.html">
                                <i class="fa fa-folder-open fa-lg"></i> Life
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../category/python.html">
                                <i class="fa fa-folder-open fa-lg"></i> Python
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../category/tool.html">
                                <i class="fa fa-folder-open fa-lg"></i> Tool
                            </a>
                        </li>
                        <li class="list-group-item">
                            <a href="../category/web-security.html">
                                <i class="fa fa-folder-open fa-lg"></i> Web Security
                            </a>
                        </li>
                    </ul>
                </li>

    </section>            
</aside>
</div>  
</div> 


<div class="row">
<div class="well well-sm" id="sidebar">
<aside>
    <section>
                <li class="list-group-item"><a href="../tag/index.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">标签云</span></h4></a>
                    <ul class="list-group" id="tags">
                        <span class="list-group-item tag-4">
                            <a href="../tag/github.html">
                                <i class="fa fa-tags fa-xs"></i> GitHub
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/lou-dong.html">
                                <i class="fa fa-tags fa-xs"></i> 漏洞
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/ren-sheng.html">
                                <i class="fa fa-tags fa-xs"></i> 人生
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/php.html">
                                <i class="fa fa-tags fa-xs"></i> PHP
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/stcmpy.html">
                                <i class="fa fa-tags fa-xs"></i> stcmpy
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/xue-xi.html">
                                <i class="fa fa-tags fa-xs"></i> 学习
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/md5.html">
                                <i class="fa fa-tags fa-xs"></i> MD5
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/vim.html">
                                <i class="fa fa-tags fa-xs"></i> vim
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/xpath.html">
                                <i class="fa fa-tags fa-xs"></i> xpath
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/scrapy.html">
                                <i class="fa fa-tags fa-xs"></i> Scrapy
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/po-jie.html">
                                <i class="fa fa-tags fa-xs"></i> 破解
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/firepath.html">
                                <i class="fa fa-tags fa-xs"></i> FirePath
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/bo-ke.html">
                                <i class="fa fa-tags fa-xs"></i> 博客
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/lian-xi.html">
                                <i class="fa fa-tags fa-xs"></i> 联系
                            </a>
                        </span>
                        <span class="list-group-item tag-4">
                            <a href="../tag/encode.html">
                                <i class="fa fa-tags fa-xs"></i> encode
                            </a>
                        </span>
                    </ul>
                </li>
    </section>            
</aside>
</div> 
</div> 

<div class="row">
<div class="well well-sm" id="sidebar">
<aside>    
    <section>
          <li class="list-group-item"><h4><i class="fa fa-camera fa-lg"></i><span class="icon-label">微博</span></h4>
          </li>
<iframe width="100%" height="490" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=490&fansRow=1&ptype=0&speed=0&skin=1&isTitle=0&noborder=1&isWeibo=1&isFans=1&uid=1966145513&verifier=629c02a7&dpc=1"></iframe>

</aside>
</div> 
</div> 

<div class="row">
<div class="well well-sm" id="sidebar">
<aside>
    <section>

    <li class="list-group-item"><h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
        <div id="gh_repos">
            <p class="list-group-item">Status updating...</p>
        </div>
    </li>
    </section>            
</aside>
</div> 
</div> 

<div class="row">
<div class="well well-sm" id="sidebar">
<aside>
    <section>
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">友情链接</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://www.wooyun.org/index.php" target="_blank">
                乌云
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://0day5.com/" target="_blank">
                漏洞时代
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
      </ul>
    </li>
    </section>            
</aside>
</div> 
</div>    
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 webhhh
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>
<script src="http://cdn.bootcss.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
<!-- <script src="../theme/js/bootstrap.min.js"></script> -->

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../theme/js/respond.min.js"></script>

<!-- For the Tags Cloud -->
<script type="text/javascript">
</script>

    <!-- GitHub JS -->
    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = '../theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'webhhh',
                count: 5,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="../theme/js/github.js" type="text/javascript"></script>
    <!-- End GitHub JS Code -->
    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'webhhh'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-50920205-1', 'webhhh.net');
        ga('send', 'pageview');
    </script>
</body>
</html>